ssh-keygen -t ed25519 -f delz.pem
chmod 400 delz.pem
mkdir -p ~/.ssh
mv delz.pem ~/.ssh/
mv delz.pem.pub ~/.ssh/

## INSTALL GITLAB CE ##
sudo apt update && sudo apt upgrade -y
sudo apt install -y curl ca-certificates tzdata perl
curl -fsSL https://packages.gitlab.com/install/repositories/gitlab/gitlab-ce/script.deb.sh | sudo bash
sudo EXTERNAL_URL="http://10.11.1.91" apt install gitlab-ce -y
cat /etc/gitlab/initial_root_password


## SETUP RUNNER ##
curl -fsSL https://get.docker.com -o get-docker.sh && sudo sh get-docker.sh
sudo usermod -aG docker $USER
curl -L "https://packages.gitlab.com/install/repositories/runner/gitlab-runner/script.deb.sh" | sudo bash
sudo apt-get install gitlab-runner -y
gitlab-runner register --url http://10.11.1.91/ --registration-token bn-g8Av9r_JW7Hz4Gpxs

SETUP IAM di AWS
" Kesalahan fatal beginner (dan ini sering bikin mereka gagal interview) adalah nyimpen file terraform.tfstate di lokal laptop.
Kalau laptop lu rusak, infrastruktur lu di AWS bakal jadi "yatim piatu" (gak bisa di-manage lagi lewat Terraform).
Best practice DevOps mewajibkan state file disimpan di Remote Backend (S3) dan dikunci (State Locking) pakai DynamoDB
biar kalau ada dua engineer jalanin Terraform barengan, infrastrukturnya gak bentrok/korup. "

1. Setup S3 Bucket
aws s3api create-bucket --bucket ades012-hybrid-cloud-tfstate --region ap-southeast-1 --create-bucket-configuration LocationConstraint=ap-southeast-1
2. Setup DynamoDB Table
aws dynamodb create-table --table-name terraform-state-lock --attribute-definitions AttributeName=LockID,AttributeType=S --key-schema AttributeName=LockID,KeyType=HASH --billing-mode PAY_PER_REQUEST --region ap-southeast-1

instance_public_ip = "47.129.3.204"

"konsep paling fundamental di DevOps: Pets vs. Cattle (Hewan peliharaan vs. Hewan ternak).
Zaman lu jadi Network Engineer ngurusin bare-metal, kalau ada server salah setting, lu bakal masuk ke ruang server dan benerin manual 
(Pets). Di Cloud pakai Terraform, kalau server kurang setting kunci, 
kita bunuh server lama dan suruh Terraform bikin server baru detik itu juga (Cattle)."